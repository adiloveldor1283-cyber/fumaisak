<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guruhlar</title>
    <style>
        * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: sans-serif;
        background-color: #111;
        color: #ccc;
    }

    .headerr {
        background-color: #2c5d77;
        padding: 10px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        color: #fff;
    }
    .headerr h1 {
        font-size: 20px;
    }
    .headerr nav a {
        color: #9cd;
        text-decoration: none;
        margin: 0 5px;
    }
    .containerr {
        display: flex;
        height: calc(100vh - 50px);
    }
    .asidee {
        width: 300px;
        background-color: #1e1e1e;
        padding: 15px;
        border-right: 1px solid #333;
    }
    .menuu h3 {
        color: #aef;
        font-size: 12px;
        margin: 10px 0 5px;
    }
    .itemm {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2px 0;
        border-radius: 4px;
        transition: background-color 0.2s ease;
    }
    .itemm:hover {
        background-color: #333;
    }
    .itemm a {
        text-decoration: none;
        display: block;
        padding: 10px 12px;
    }
    .itemm .linkk {
        color: #eee;
        flex: 1;
    }
    .itemm .addd {
        color: #7f7;
        font-weight: bold;
    }
    .itemm .linkk:hover {
        color: #fff;
    }
    .itemm .addd:hover {
        color: #9f9;
    }
    .main-main {
        width: 100%;
        padding: 20px 20px;
        font-size: 12px;
    }


    .messages {
    margin: 10px;
}

.alert_alert {
    position: fixed;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    color: white;
    padding: 12px 24px;
    border-radius: 10px;
    box-shadow: 0 0 10px rgba(0,0,0,0.3);
    z-index: 9999;
    transition: opacity 0.5s ease;
    opacity: 1;
}

/* Ranglar */
.alert_alert.success {
    background-color: #4CAF50; /* yashil */
}

.alert_alert.error {
    background-color: #f44336; /* qizil */
}

/* Yoâ€˜qolish effekti */
.fade-out {
    opacity: 0;
}


    .form-label {
        display: block;
        margin-bottom: 6px;
        font-weight: 500;
        font-size: 14px;
    }

    .form-select, .form-control {
        width: 100%;
        padding: 10px;
        font-size: 14px;
        border: 1px solid #777;
        border-radius: 6px;
        outline: none;
        transition: all 0.2s ease-in-out;
        background-color: #222;
        color: white;
    }

    button {
        width: 100%;
        padding: 10px;
        background: #555;
        color: #fff;
        border: none;
        border-radius: 6px;
        font-size: 15px;
        font-weight: 500;
        cursor: pointer;
        transition: background 0.3s;
    }
    button:hover {
        background: #777;
    }

    .mb-3 {
        margin-bottom: 15px;
    }
    .mt-3 {
        margin-top: 15px;
    }
    .mt-4 {
        margin-top: 20px;
    }
    .namuna {
        background: #222;
        padding: 15px;
        margin: 20px 0;
        border-radius: 8px;
        font-family: Arial, sans-serif;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    .namuna h2 {
        margin-top: 0;
        color: #4CAF50;
        margin-bottom: 10px;
    }

    .namuna ul {
        margin: 10px 0;
        padding-left: 20px;
        font-size: 14px;
    }

    .namuna pre {
        background: #333;
        color: #fff;
        padding: 10px;
        border-radius: 6px;
        overflow-x: auto;
        font-family: monospace;
    }
    .namuna p {
        font-size: 20px;
    }

    </style>
</head>
{% block content %}
<body>
    <div class="headerr">
        <h1>Admin</h1>
        <nav>
            <a href="{% url 'admin:index' %}">ADMIN</a> /
            <a href="{% url 'admin_password' %}">Parolni almashtirish</a> /
            <a href="{% url 'login' %}">Chiqish</a>
        </nav>
    </div>

    <div class="containerr">
        <div class="asidee">
            <div class="menuu">
                <h3>MENU</h3>
                <div class="itemm">
                    <a href="{% url 'all_groups_admin' %}" class="linkk">Guruhlar</a>
                    <a href="{% url 'create_group_admin' %}" class="addd">+ qo'shish</a>
                </div>

                <div class="itemm">
                    <a href="{% url 'students_list_admin' %}" class="linkk">O'quvchilar</a>
                    <a href="{% url 'add_student' %}" class="addd">+ qo'shish</a>
                </div>

                <div class="itemm">
                    <a href="{% url 'teachers_list_admin' %}" class="linkk">O'qituvchilar</a>
                    <a href="{% url 'add_teacher' %}" class="addd">+ qo'shish</a>
                </div>

                <div class="itemm">
                    <a href="{% url 'admin_assignment_list' %}" class="linkk">Topshiriqlar</a>
                    <a href="{% url 'add_topshiriq' %}" class="addd">+ qo'shish</a>
                </div>

                <div class="itemm">
                    <a href="{% url 'all_group_schedules' %}" class="linkk">Dars rejasi</a>
                    <a href="{% url 'all_groups_admin' %}" class="addd">+ qo'shish</a>
                </div>

                <div class="itemm">
                    <a href="{% url 'quiz_list' %}" class="linkk">Testlar</a>
                    <a href="{% url 'add_quiz' %}" class="addd">+ qo'shish</a>
                </div>

                <div class="itemm">
                    <a href="{% url 'question_list' %}" class="linkk">Savollar</a>
                    <a href="{% url 'add_test_admin' %}" class="addd">+ qo'shish</a>
                </div>
                <div class="itemm">
                    <a href="{% url 'group_payment_list' %}" class="linkk">Guruh to'lov</a>
                </div>
                <div class="itemm">
                    <a href="{% url 'student_list' %}" class="linkk">Barcha to'lov</a>
                </div>
            </div>
        </div>

        <div class="main-main">
            <h2>CSV orqali foydalanuvchilarni import qilish</h2>
            <form method="post" enctype="multipart/form-data" class="mt-3">
                {% csrf_token %}

                <div class="mb-3">
                    <label for="role" class="form-label">Foydalanuvchi turi</label>
                    <select name="role" id="role" class="form-select" required>
                        <option value="student">O'quvchi</option>
                        <option value="teacher">Oâ€˜qituvchi</option>
                    </select>
                </div>

                <div class="mb-3">
                    <label for="csv_file" class="form-label">CSV faylni tanlang</label>
                    <input type="file" name="csv_file" id="csv_file" class="form-control" accept=".csv" required>
                </div>

                <button type="submit" class="btn btn-primary">Yuklash</button>
            </form>

            <div class="namuna">
        <h2>ðŸ“„ CSV Fayl Namuna</h2>
        <p>Fayl quyidagi ustunlar tartibida boâ€˜lishi kerak:</p>
        <ul>
            <li><b>username</b> â€“ Foydalanuvchi login nomi</li>
            <li><b>first_name</b> â€“ Ismi</li>
            <li><b>last_name</b> â€“ Familiyasi</li>
            <li><b>phone_number</b> â€“ Telefon raqami (+998 formatida)</li>
            <li><b>password</b> â€“ Parol</li>
        </ul>
        <p><b>Namuna CSV tarkibi:</b></p>
        <pre>
    username,first_name,last_name,phone_number,password
    student01,Ali,Karimov,+998901111111,123456
    student02,Vali,Islomov,+998901111112,123456
    teacher01,Anvar,Abdullayev,+998901111116,teacherpass
        </pre>
    </div>

            {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    {% if 'import_success' in message.tags %}
                        <div class="alert_alert success">{{ message }}</div>
                    {% elif 'import_error' in message.tags %}
                        <div class="alert_alert error">{{ message }}</div>
                    {% endif %}
                {% endfor %}
            </div>
            {% endif %}

        </div>
    </div>

    <script>
        setTimeout(function () {
            document.querySelectorAll('.alert_alert').forEach(function(el){
                el.classList.add('fade-out');
                setTimeout(() => el.remove(), 500); // animatsiya tugagach o'chirish
            });
        }, 3000);
    </script>
</body>
{% endblock %}
</html>
